<html>

<head>
  <title>Documentation - Model diagram</title>
  <link rel="stylesheet" href="styles/github-markdown.css">
  <style>
    .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }
  </style>
</head>

<body>
  <a href="./">&#8624; Back to the diagram</a>
  <article class="markdown-body">
    <h1>Model diagram documentation</h1>

    <ul>
      <li><a href="#options">Options</a></li>
      <li><a href="#download">Download source and image</a></li>
      <li><a href="#relations">Relations</a></li>
    </ul>

    <h2 id="options">Options</h2>
    <p>You can specify some options in the query string:</p>
    <ul>
      <li><code>properties</code>: if <code>false</code>, it hides the properties of each node (e.g. <code>properties=false</code>)</li>
      <li><code>hideInherited</code>: if <code>false</code>, it hides inherited properties (e.g. <code>hideInherited=false</code>)</li>
      <li><code>exclude</code>: it hides the specified nodes and the relations connected with them (e.g. <code>exclude=User,defensible,SoldierLink)</code></li>
      <li>any <a href="https://github.com/skanaar/nomnoml/#directives">directive</a> of <a href="http://www.nomnoml.com/">nomnoml</a>        (e.g. <code>arrowSize=2&direction=right&stroke=%23ff0000&fill=%23000</code>).</li>
    </ul>

    <h2 id="download">Download source and image</h2>
    <p>You can download the source code of the diagram as text file by using the link in the index page. It reflects the filters
      applied in the URL. Note that going to the <code><a href="source">/source</a></code> URI, you get the source code without
      any filter.</p>
    <p>You can download the diagram as image by right clicking on the canvas and selecting the appropriate option.</p>

    <h2 id="relations">Relations</h2>
    <p>The relations between the models are represented as follows.</p>
    <h3>One-to-one</h3>
    <p>A one-to-one relation can be enstablished with a <code>hasOne</code> relation. For instance, a supplier has one account,
      and an account can belongs to a supplier. If the <code>belongsTo</code> relation from the account to the supplier is
      defined, it is considered as a logical reflection of the <code>hasOne</code>, then it is discarded.</p>
    <img src="images/has-one.png" alt="One-to-one relation" title="One-to-one relation">
    <h3>One-to-many</h3>
    <p>A one-to-many relation can be enstablished with a <code>hasMany</code> or a <code>belongsTo</code> relation. For instance,
      a customer has many order, and an order can belongs to a customer. If the <code>belongsTo</code> relation from the
      order to the customer is defined and there is a <code>hasMany</code> relation, then it is considered as a logical reflection
      of the <code>hasMany</code> and it is discarded. But, if there is no <code>hasMany</code> invers relation, then it
      is considered and it is drawn like his plural reflection. In practice, this means that the <code>hasMany</code> and
      the <code>belongsTo</code> (with no invers <code>hasOne</code>) are diplayed in the same way.</p>
    <img src="images/has-many.png" alt="One-to-many relation" title="One-to-many relation">
    <h3>Many-to-many</h3>
    <p>A many-to-many relation can be enstablished with a <code>hasAndBelongsToMany</code> or a <code>hasManyThrough</code>      relation. For instance, a doctor has and belongs to many patients and vice versa.</p>
    <img src="images/has-and-belongs-to-many.png" alt="Many-to-many relation without a through model" title="Many-to-many relation without a through model">
    <p>In the same way, a doctor and a patient can be linked by the appointment, that is the "through" model.</p>
    <img src="images/has-many-through.png" alt="Many-to-many relation with a through model" title="Many-to-many relation with a through model">
    <h3>Polymorphics</h3>
    <p>The polymorphic relations <code>hasOne</code> or <code>hasMany</code> are displayed with a node representing their "as"
      property. For instance, if a barricade (and a stronghold) as defensible has one soldier, then the diagram will look
      like:
    </p>
    <img src="images/p-has-one.png" alt="Has one polymorphic relation" title="Has one polymorphic relation">
    <p>If a barricade (and a stronghold) as defensible has many soldier, then the diagram will be like:</p>
    <img src="images/p-has-many.png" alt="Has many polymorphic relation" title="Has many polymorphic relation">
    <p>When you create a <code>hasAndBelongsToMany</code> polymorphic relation, you have also to specify a "through" model.
      In this case the "defensible" node will not be displayed in favor of a better readability of the diagram. So, if a
      barricade (and a stronghold) has and belongs to many soldier through a SoldierLink, then the diagram will look like:</p>
    <img src="images/p-has-and-belongs-to-many.png" alt="Has and belongs to many polymorphic relation" title="Has and belongs to many polymorphic relation">
    <h3>Emdedded</h3>
    <p>The embedded and the reference relations are displayed as a property in the model. For instance, if a customer embeds
      one billing address:</p>
    <img src="images/embeds-one.png" alt="Embeds one relation" title="Embeds one relation">
    <p>If a customer embeds many emails:</p>
    <img src="images/embeds-many.png" alt="Embeds many relation" title="Embeds many relation">
    <p>If a customer references many accounts:</p>
    <img src="images/references-many.png" alt="References many relation" title="References many relation">
    <h3>Inheritance</h3>
    <p>Another useful relation represented, but not defined as a proper relation, is the inheritance. This is determined looking
      up the base model. It's displayed only id the base model is not "Model" or "PersistedModel". For instance, if the base
      model of a beer were a beverage, so it would be like:</p>
    <img src="images/inheritance.png" alt="Inheritance relation" title="Inheritance relation">
  </article>
</body>

</html>